import * as vite from 'vite';
import { Plugin } from 'vite';
import { UserConfig, UnoGenerator, BetterMap, UserConfigDefaults } from '@unocss/core';
import { FilterPattern } from '@rollup/pluginutils';

interface VitePluginOptions {
    include?: FilterPattern;
    exclude?: FilterPattern;
    /**
     * Enable UnoCSS inspector
     *
     * @default true
     */
    inspector?: boolean;
    /**
     * CSS Generation mode
     *
     * - `global` - generate a single CSS sheet for entire App
     * - `dist-chunk` - generate a CSS sheet for each code chunk on build, great for MPA
     * - `per-module` - generate a CSS sheet for each module, can be scoped
     * - `vue-scoped` - inject generated CSS to Vue SFC's `<style scoped>` for isolation
     *
     * @default 'global'
     */
    mode?: 'global' | 'per-module' | 'vue-scoped' | 'dist-chunk';
}
interface UnocssPluginOptions extends UserConfig, VitePluginOptions {
}

declare function createContext(uno: UnoGenerator, config: UnocssPluginOptions, configFilepath?: string): {
    tokens: Set<string>;
    modules: BetterMap<string, string>;
    invalidate: () => void;
    onInvalidate(fn: () => void): void;
    uno: UnoGenerator;
    scan: (code: string, id?: string | undefined) => Promise<void>;
    config: UnocssPluginOptions;
    configFilepath: string | undefined;
};
declare type UnocssPluginContext = ReturnType<typeof createContext>;

declare function ChunkModeBuildPlugin({ uno, config }: UnocssPluginContext): Plugin;

declare function GlobalModeDevPlugin({ config, uno, tokens, onInvalidate, scan }: UnocssPluginContext): Plugin[];

declare function GlobalModeBuildPlugin({ uno, config, scan, tokens }: UnocssPluginContext): Plugin[];

declare function GlobalModePlugin(ctx: UnocssPluginContext): vite.Plugin[];

declare function PerModuleModePlugin({ uno, config }: UnocssPluginContext): Plugin;

declare function VueScopedPlugin({ uno, config }: UnocssPluginContext): Plugin;

declare function UnocssPlugin(configOrPath?: UnocssPluginOptions | string, defaults?: UserConfigDefaults): Plugin[];

export { ChunkModeBuildPlugin, GlobalModeBuildPlugin, GlobalModeDevPlugin, GlobalModePlugin, PerModuleModePlugin, UnocssPluginContext, UnocssPluginOptions, VitePluginOptions, VueScopedPlugin, UnocssPlugin as default };
